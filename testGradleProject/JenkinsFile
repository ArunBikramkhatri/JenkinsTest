pipeline {
    agent any

    stages{
        stage('Build'){
            steps {
                    dir('testGradleProject'){
                        sh './gradlew clean build'
                   }
                }
            }
        stage('Test'){
            steps{
                dir('testGradleProject'){
                    sh './gradlew test'
                }
              }
           }
        }

    post{
        success {
            emailext subject:"jenkins build status" ,
                      body: "build successful",
                      to:'khatriarun221@gmail.com'

        }
        failure {
            emailext subject:"jenkins build status",
                      body:"build failure",
                      to:'khatriarun221@gmail.com'
        }
    }
}